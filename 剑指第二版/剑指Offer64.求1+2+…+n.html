<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>剑指 Offer 64. 求1+2+…+n</title>
  </head>
  <body>
    <script>
      // https://leetcode-cn.com/problems/qiu-12n-lcof/

      // 求 1+2+...+n ，要求不能使用乘除法、for、while、if、else、switch、case等关键字及条件判断语句（A?b:C）。
      // 提示：
      // 1 <= n <= 10000

      /**
       * @param {number} n
       * @return {number}
       */

      var sumNums = function (n) {};

      // --- answer-1 ---

      var add = function (a, b) {
        while (b != 0) {
          // 当进位为 0 时跳出
          let c = (a & b) << 1; // c = 进位
          a ^= b; // a = 非进位和
          b = c; // b = 进位
        }
        return a;
      };

      // 使用位运算实现加号
      // 递归
      var sumNums = function (n) {
        let sum = 1;
        for (let i = 2; i <= n; i++) {
          sum = add(sum, i);
        }
        return sum;
      };
      // 循环

      // --- answer-1 ---

      // --- answer-1 ---

      // 看错了 可以用+-
      var sumNums = function (n) {
        n && (n += sumNums(n - 1));
        return n;
      };

      // --- answer-2 ---

      // --- answer-3 ---

      // 等差数列通项公式 (首项 + 末项) * 项数 / 2
      // 位运算实现 + * /

      function quickMulti(a, b) {
        let ans = 0;
        for (; b; b >>= 1) {
          if (b & 1) {
            ans += a;
          }
          a <<= 1;
        }
        return ans;
      }

      var sumNums = function (n) {
        return quickMulti(1 + n, n) >> 1;
      };

      // --- answer-3 ---

      var n = 3;
      var result = 6;

      var n = 9;
      var result = 45;

      console.log('n = ', n);
      console.log('result = ', result);
      console.log('sumNums = ', sumNums(n));
    </script>
  </body>
</html>
