<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>697. 数组的度</title>
  </head>
  <body>
    <script>
      // https://leetcode.cn/problems/degree-of-an-array/

      // 给定一个非空且只包含非负数的整数数组 nums，数组的 度 的定义是指数组里任一元素出现频数的最大值。
      // 你的任务是在 nums 中找到与 nums 拥有相同大小的度的最短连续子数组，返回其长度。
      // 提示：
      // nums.length 在 1 到 50,000 范围内。
      // nums[i] 是一个在 0 到 49,999 范围内的整数。

      /**
       * @param {number[]} nums
       * @return {number}
       */
      var findShortestSubArray = function (nums) {};

      // --- answer-1 ---

      // 构造一个辅助对象
      var findShortestSubArray = function (nums = []) {
        const hash = {};
        let du = 1;
        function buildMap(map = {}, n, idx) {
          if (map[n]) {
            map[n].count += 1;
            map[n].end = idx;
            du = Math.max(du, map[n].count);
          } else {
            map[n] = {
              count: 1, // 长度
              start: idx, // 开始下标
              end: idx // 结尾下标
            };
          }
        }
        for (let i = 0; i < nums.length; i++) {
          buildMap(hash, nums[i], i);
        }
        let min = nums.length;
        for (let k in hash) {
          if (hash[k].count === du) {
            min = Math.min(min, hash[k].end - hash[k].start + 1);
          }
        }

        return min;
      };

      // --- answer-1 ---

      // --- answer-2 ---

      // --- answer-2 ---

      var nums = [1, 2, 2, 3, 1];
      var result = 2;
      // 解释：

      // var nums = [1, 2, 2, 3, 1, 4, 2];
      // var result = 6;
      // 解释：

      console.log('nums = ', nums);
      console.log('result = ', result);
      console.log('findShortestSubArray = ', findShortestSubArray(nums));
    </script>
  </body>
</html>
