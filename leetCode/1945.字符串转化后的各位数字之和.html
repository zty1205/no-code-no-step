<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1945. 字符串转化后的各位数字之和</title>
  </head>
  <body>
    <script>
      // https://leetcode.cn/problems/sum-of-digits-of-string-after-convert/

      // 给你一个由小写字母组成的字符串 s ，以及一个整数 k 。
      // 首先，用字母在字母表中的位置替换该字母，将 s 转化 为一个整数（也就是，'a' 用 1 替换，'b' 用 2 替换，... 'z' 用 26 替换）。接着，将整数 转换 为其 各位数字之和 。共重复 转换 操作 k 次 。
      // 提示：
      // 转化："zbax" ➝ "(26)(2)(1)(24)" ➝ "262124" ➝ 262124
      // 转换 #1：262124 ➝ 2 + 6 + 2 + 1 + 2 + 4 ➝ 17
      // 转换 #2：17 ➝ 1 + 7 ➝ 8
      // 返回执行上述操作后得到的结果整数。
      // 提示：
      // 1 <= s.length <= 100
      // 1 <= k <= 10
      // s 由小写英文字母组成

      /**
       * @param {string} s
       * @param {number} k
       * @return {number}
       */
      var getLucky = function (s = '', k = 0) {};

      // --- answer-1 ---

      function calc(num = 0) {
        if (num < 10) return num;
        let sum = 0;
        while (num) {
          let cur = num % 10;
          num = (num - cur) / 10;
          sum += cur;
        }
        return sum;
      }

      // 模拟
      var getLucky = function (s = '', k = 0) {
        let num = s
          .split('')
          .map((ch) => ch.charCodeAt() - 'a'.charCodeAt() + 1)
          .reduce((sum, cur) => (sum += calc(cur)), 0);
        console.log(s.split('').map((ch) => ch.charCodeAt() - 'a'.charCodeAt() + 1));
        console.log('num 1 ', num);
        for (let i = 0; i < k - 1; i++) {
          console.log(`num ${i + 2} `, num);
          num = calc(num);
        }
        return num;
      };

      // --- answer-1 ---

      // --- answer-2 ---

      // --- answer-2 ---

      var s = 'iiii',
        k = 1;
      var result = 36;
      // 解释：操作如下：

      var s = 'leetcode',
        k = 2;
      var result = 6;
      // 解释：操作如下：

      var s = 'zbax',
        k = 2;
      var result = 8;

      console.log('s = ', s);
      console.log('k = ', k);
      console.log('result = ', result);
      console.log('getLucky = ', getLucky(s, k));
    </script>
  </body>
</html>
