<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>167.两数之和II-输入有序数组</title>
  </head>
  <body>
    <script>
      // 给定一个已按照 非递减顺序排列  的整数数组 numbers ，请你从数组中找出两个数满足相加之和等于目标数 target 。

      // 函数应该以长度为 2 的整数数组的形式返回这两个数的下标值。numbers 的下标 从 1 开始计数 ，所以答案数组应当满足 1 <= answer[0] < answer[1] <= numbers.length 。

      // 你可以假设每个输入 只对应唯一的答案 ，而且你 不可以 重复使用相同的元素。

      // 提示：
      // 2 <= numbers.length <= 3 * 104
      // -1000 <= numbers[i] <= 1000
      // numbers 按 非递减顺序 排列
      // -1000 <= target <= 1000
      // 仅存在一个有效答案

      /**
       * @param {number[]} numbers
       * @param {number} target
       * @return {number[]}
       */

      // 构建map
      var twoSum = function (numbers = [], target) {
        const map = numbers.reduce((pre, curVal, idx) => {
          pre[curVal] = idx;
          return pre;
        }, {});
        for (let i = 0; i < numbers.length; i++) {
          let n1 = numbers[i];
          if (target - n1 in map && map[target - n1] !== i) {
            return [i + 1, map[target - n1] + 1];
          }
        }
        return [];
      };

      var twoSum = function (numbers = [], target) {
        let start = 0;
        let end = numbers.length - 1;
        while (start < end) {
          let sum = numbers[start] + numbers[end];
          if (sum === target) {
            return [start + 1, end + 1];
          } else if (sum < target) {
            start++;
          } else {
            end--;
          }
        }
        return [];
      };

      // 双指针， 利用递增的特性压缩搜索空间
      //   2  7  11  15
      // 2    9  13  17
      // 7       20  22

      let numbers = [2, 7, 11, 15];
      let target = 9;
      let res = [1, 2];

      // numbers = [2, 3, 4];
      // target = 6;
      // res = [1, 3];

      // numbers = [-1, 0];
      // target = -1;
      // res = [1, 2];

      console.log(`number: ${numbers}, target: ${target} \n res: ${res} === ${twoSum(numbers, target)}`);
    </script>
  </body>
</html>
