<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1486. 数组异或操作</title>
  </head>
  <body>
    <script>
      // https://leetcode.cn/problems/xor-operation-in-an-array/

      // 给你两个整数，n 和 start 。
      // 数组 nums 定义为：nums[i] = start + 2*i（下标从 0 开始）且 n == nums.length 。
      // 请返回 nums 中所有元素按位异或（XOR）后得到的结果。
      // 提示：
      // 1 <= n <= 1000
      // 0 <= start <= 1000
      // n == nums.length

      /**
       * @param {number} n
       * @param {number} start
       * @return {number}
       */
      var xorOperation = function (n, start) {};

      // --- answer-1 ---

      var xorOperation = function (n = 1, start = 0) {
        let result = 0;
        for (let i = 0; i < n; ++i) {
          result ^= start + i * 2;
        }
        return result;
      };

      // --- answer-1 ---

      // --- answer-2 ---

      // 数学计算
      // https://leetcode.cn/problems/xor-operation-in-an-array/solution/gong-shui-san-xie-yi-ti-shuang-jie-mo-ni-dggg/
      var xorOperation = function (n, start) {
        let s = start >> 1,
          e = n & start & 1;
        let ret = sumXor(s - 1) ^ sumXor(s + n - 1);
        return (ret << 1) | e;
      };

      const sumXor = (x) => {
        if (x % 4 === 0) {
          return x;
        }
        if (x % 4 === 1) {
          return 1;
        }
        if (x % 4 === 2) {
          return x + 1;
        }
        return 0;
      };

      // --- answer-2 ---

      var n = 5,
        start = 0;
      var result = 8;
      // 解释：数组 nums 为 [0, 2, 4, 6, 8]，其中 (0 ^ 2 ^ 4 ^ 6 ^ 8) = 8 。

      var n = 4,
        start = 3;
      var result = 8;
      // 解释：数组 nums 为 [3, 5, 7, 9]，其中 (3 ^ 5 ^ 7 ^ 9) = 8.

      var n = 1,
        start = 7;
      var result = 7;

      var n = 10,
        start = 5;
      var result = 2;

      console.log('n = ', n);
      console.log('start = ', start);
      console.log('result = ', result);
      console.log('xorOperation = ', xorOperation(n, start));
    </script>
  </body>
</html>
